{
  "data": [
    {
      "id": "base",
      "fields": [
        {"id": "x", "granularity": 0.5},
        {"id": "count"}
      ],
      "rows": [
        [ 0.25, 3200 ],
        [ 0.75, 1600 ],
        [ 1.25, 800 ],
        [ 1.75, 400 ],
        [ 2.25, 200 ],
        [ 2.75, 100 ],
        [ -0.25, 1800 ],
        [ -0.75, 2000 ],
        [ -1.25, 450 ],
        [ -1.75, 225 ],
        [ -2.25, 100 ],
        [ -2.75, 100 ]
      ]
    },
    {
      "id": "data",
      "source": {"$ref": "base"},
      "type": "summary",
      "group": [
        {"input": {"$ref": "x"}, "output": {"id": "val"}}
      ],
      "input": [
        {"field": {"$ref": "count"}, "role": "weight"}
      ],
      "output": [
        {
          "field": {"id": "freq"},
          "parameters": {"summaryFunction": "count"}
        }
      ]
    },
    {
      "id": "kernel",
      "source": {"$ref": "base"},
      "type": "distribution.normal",
      "input": [
        {"field": {"$ref": "x"}, "role": "x"},
        {"field": {"$ref": "count"}, "role": "weight"}
      ],
      "output": [
        {"field": {"id": "kX"}, "role": "x"},
        {"field": {"id": "kY", "min": 0}, "role": "y"}
      ]
    },
    {
      "id": "drawPoints",
      "fields": [ {"id": "drawX"} ],
      "rows": [
        [ -2.2 ],
        [ -1.1 ],
        [ 0.6 ],
        [ 1.4 ],
        [ 2.3 ]
      ]
    }
  ],
  "grammar": [
    {
      "coordinates": {
        "dimensions": [
          {"scale": {"spans": [ {"fit": "exact"} ]}},
          {}
        ]
      },
      "elements": [
        {
          "type": "interval",
          "data": {"$ref": "data"},
          "position": [
            {"field": {"$ref": "freq"}},
            {"field": {"$ref": "val"}}
          ],
          "style": {
            "fill": {"a": 0.3, "b": 0, "g": 255, "r": 255},
            "outline": {"a": 0.3, "b": 0, "g": 0, "r": 0}
          }
        },
        {
          "id": "refLine",
          "type": "line",
          "data": {"$ref": "kernel"},
          "position": [
            {"field": {"$ref": "kY"}},
            {"field": {"$ref": "kX"}}
          ],
          "style": {
            "fill": {"a": 1.0, "b": 40, "g": 40, "r": 40},
            "stroke": {"width": 2.0},
            "outline": {"a": 1.0, "b": 40, "g": 40, "r": 40}
          }
        },
        {
          "type": "edge",
          "position": [
            {"value": 0},
            {
              "derivedValue": {
                "variable": {"$ref": "drawX"},
                "functionName": "curveTop",
                "target": {"$ref": "refLine"}
              }
            },
            {"field": {"$ref": "drawX"}},
            {"field": {"$ref": "drawX"}}
          ],
          "style": {
            "fill": {"a": 1.0, "b": 0, "g": 0, "r": 255},
            "stroke": {"width": 2.0}
          }
        }
      ]
    }
  ],
  "size": {"width": 600, "height": 200},
  "version": "3.0"
}